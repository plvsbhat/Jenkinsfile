pipeline {
	agent { label 'slave2' }
	stages {
		stage ('Git checkout') {
			steps {
				echo 'This is GIT checkout stage'
				git 'https://github.com/plvsbhat/Jenkinsfile.git'
			}
		}
		stage ('Build') {
			steps {
				echo 'This is a build stage'
				sh 'mvn clean install'
			}
		}
		stage ('Push to artifactory') {
			steps {
				echo 'this is push stage'
				sh 'sleep 3'
			}
		}
		stage ('Deploy') {
			steps {
				echo ' this is deploy stage'
				sh '''cd /home/ec2-user/jenkins/workspace/java-project3/ sudo cp target/*.jar /opt/apache*/webapps/'''
			}
		}
	}
}
